{% extends 'base/app.html' %}

{% load static %}

{% block title %}
    | Burndown Chart
{% endblock %}

{% block styles %}
    {# SELECT2   #}
    <link rel="stylesheet" href="{% static "lib/adminlte-3.2.0/plugins/select2/css/select2.min.css" %}">
    <link rel="stylesheet"
          href="{% static "lib/adminlte-3.2.0/plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css" %}">
    <link rel="stylesheet"
          href="{% static "lib/adminlte-3.2.0/plugins/uplot/uPlot.min.css" %}">

{% endblock %}
{% block sidebar %}
    {% include 'sprint/base/partials/nav.html' %}
{% endblock %}

{% block active_section %}
    <span id="active-section" data-value="sprint"></span>
{% endblock %}

{% block content %}

    <section class="content">
        <!-- /.card -->
        <div class="card card-info">
            <div class="card-header">
                <h3 class="card-title">Burndown Chart "{{ sprint.sprint_name }}" </h3>
                <div class="card-tools">
                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                        <i class="fas fa-minus"></i>
                    </button>
                </div>
            </div>
            <div class="card-body">
                <div class="chart">
                    <div id="lineChart"
                         style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></div>
                </div>
            </div>
            <!-- /.card-body -->
        </div>
    </section>

{% endblock %}

{% block scripts %}
    <script src="{% static 'lib/adminlte-3.2.0/plugins/jquery-validation/jquery.validate.min.js' %}"></script>
    <script src="{% static "lib/adminlte-3.2.0/plugins/uplot/uPlot.iife.min.js" %}"></script>
    <script src="{% static "lib/adminlte-3.2.0/plugins/bootstrap/js/bootstrap.bundle.min.js" %}"></script>

    <script defer>
        $(function () {
            /* uPlot
         * -------
         * Here we will create a few charts using uPlot
         */
            function getSize(elementId) {
                return {
                    width: document.getElementById(elementId).offsetWidth,
                    height: document.getElementById(elementId).offsetHeight,
                }
            }

            let data = [
                [0, 1, 2, 3, 4, 5, 6],
                [28, 48, 40, 19, 86, 27, 90],
                [65, 59, 80, 81, 56, 55, 40]
            ];
            const optsLineChart = {
                ...getSize('lineChart'),
                scales: {
                    x: {
                        title: 'Dias',
                        time: false,
                    },
                    y: {
                        title: 'Estimacion',
                        range: [0, 100],
                    },
                },
                series: [
                    {},
                    {
                        fill: 'transparent',
                        width: 5,
                        stroke: 'rgba(60,141,188,1)',
                    },
                    {
                        stroke: '#c1c7d1',
                        width: 5,
                        fill: 'transparent',
                    },
                ],
            };

            let lineChart = new uPlot(optsLineChart, data, document.getElementById('lineChart'));

            window.addEventListener("resize", e => {
                lineChart.setSize(getSize('lineChart'));
            });
        })
    </script>
{% endblock %}
